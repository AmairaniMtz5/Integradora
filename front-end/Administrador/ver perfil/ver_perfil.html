<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ver perfil - Administrador</title>
  <link rel="stylesheet" href="../Dashboard/dashboard-admin.css">
  <link rel="stylesheet" href="ver_perfil.css?v=20251204a">
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="profile">
        <div class="avatar"><img id="adminPhoto" src="../Dashboard/avatar.png" alt="Administrador"></div>
        <h3 id="adminName">Administrador</h3>
        <p id="adminEmail" class="muted"></p>
      </div>
      <nav class="menu">
        <ul>
          <li onclick="window.location.href='../Dashboard/dashboard-admin.html'">Inicio</li>
          <li onclick="window.location.href='../terapeuta/terapeutas.html'">Terapeutas</li>
          <li class="active" onclick="window.location.href='../Pacientes/pacientes.html'">Pacientes</li>
          <li onclick="window.location.href='../Ejercicios/ejercicios.html'">Ejercicios</li>
          <li onclick="window.location.href='../Dar de alta paciente/alta-paciente.html'">Dar de alta paciente</li>
          <li onclick="window.location.href='../Dar de alta terapeuta/alta-terapeuta.html'">Dar de alta terapeuta</li>
          <li onclick="window.location.href='../Historial/historial.html'">Historial</li>
          <li onclick="logoutAdmin()">Cerrar sesi√≥n</li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <h1>Perfil del paciente</h1>

      <section class="profile-panel" id="profilePanel">
        <div class="profile-header">
          <div class="profile-summary">
            <div class="avatar-box"><img id="pfAvatar" src="https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=400&h=400&fit=crop&crop=face" class="avatar-img"></div>
            <div class="profile-info">
              <h2 id="pfName">Paciente</h2>
              <div id="pfMeta">Edad: -- ¬∑ Tel: -- ¬∑ Estado: --</div>
              <div id="pfDiagnosis" class="diagnosis-badge"></div>
            </div>
          </div>
          <div class="profile-actions">
            <button class="btn btn-secondary" onclick="history.back()">‚Üê Volver</button>
            <button class="btn btn-primary" id="editProfileBtn" onclick="toggleEditMode()">‚úèÔ∏è Editar perfil</button>
          </div>
        </div>

        <!-- Tabs de navegaci√≥n -->
        <div class="profile-tabs">
          <button class="tab-btn active" data-tab="info" onclick="switchTab('info')">Informaci√≥n</button>
          <button class="tab-btn" data-tab="exercises" onclick="switchTab('exercises')">Ejercicios</button>
        </div>

        <!-- Tab: Informaci√≥n del paciente -->
        <div class="tab-content active" id="infoTab">
          <form id="profileForm" class="profile-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="editFirstName">Nombre</label>
                <input type="text" id="editFirstName" placeholder="Nombre" disabled>
              </div>
              <div class="form-group">
                <label for="editLastName">Apellido</label>
                <input type="text" id="editLastName" placeholder="Apellido" disabled>
              </div>
              <div class="form-group">
                <label for="editEmail">Correo electr√≥nico</label>
                <input type="email" id="editEmail" placeholder="correo@ejemplo.com" disabled>
              </div>
              <div class="form-group">
                <label for="editPhone">Tel√©fono</label>
                <input type="tel" id="editPhone" placeholder="+52 123 456 7890" disabled>
              </div>
              <div class="form-group">
                <label for="editAge">Edad</label>
                <input type="number" id="editAge" placeholder="Edad" disabled>
              </div>
              <div class="form-group">
                <label for="editDiagnosis">Diagn√≥stico</label>
                <select id="editDiagnosis" disabled>
                  <option value="">Seleccionar...</option>
                  <option value="Escoliosis lumbar">Escoliosis lumbar</option>
                  <option value="Espondil√≥lisis">Espondil√≥lisis</option>
                  <option value="Hernia de disco lumbar">Hernia de disco lumbar</option>
                  <option value="Lumbalgia mec√°nica inespec√≠fica">Lumbalgia mec√°nica inespec√≠fica</option>
                </select>
              </div>
            </div>
            <div id="formActions" class="form-actions" style="display:none">
              <button type="submit" class="btn btn-success">üíæ Guardar cambios</button>
              <button type="button" class="btn btn-secondary" onclick="cancelEdit()">Cancelar</button>
            </div>
          </form>
        </div>

        <!-- Tab: Ejercicios asignados -->
        <div class="tab-content" id="exercisesTab">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
            <h3 class="ex-section-title" style="margin:0">Ejercicios asignados a este paciente</h3>
          </div>
          <div id="exercisesContainer" class="ex-list">
            <!-- tarjetas de ejercicios asignados -->
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Confirmation Modal -->
  <div id="deleteModal" class="modal">
    <div class="modal-content modal-confirm">
      <div class="modal-header modal-warning">
        <h2>‚ö†Ô∏è Confirmar eliminaci√≥n</h2>
      </div>
      <div class="modal-body">
        <p class="confirm-message">¬øEst√°s seguro de que quieres eliminar este ejercicio?</p>
        <p class="confirm-warning">Esta acci√≥n no se puede deshacer.</p>
        <div class="confirm-actions">
          <button class="btn btn-action btn-secondary" onclick="cancelDeleteAssignment()">Cancelar</button>
          <button class="btn btn-action btn-danger" onclick="confirmDeleteAssignment()">Eliminar</button>
        </div>
      </div>
    </div>
  </div>

  

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../../shared/supabase-client.js"></script>
  <script src="../../shared/supabase-auth.js"></script>
  <!-- Admin manager -->
  <script src="../Dashboard/admin-manager.js"></script>
  <script src="ver_perfil.js?v=20251204a"></script>
</body>
</html>
