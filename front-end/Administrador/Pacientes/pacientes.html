<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pacientes</title>
  <link rel="stylesheet" href="../Dashboard/dashboard-admin.css">
  <link rel="stylesheet" href="pacientes.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Canonical Sidebar (from dashboard-admin.html) -->
    <aside class="sidebar">
      <div class="profile">
        <div class="avatar">
          <img id="adminPhoto" src="../Dashboard/avatar.png" alt="Administrador">
        </div>
        <h3 id="adminName">Administrador</h3>
        <p id="adminEmail" class="muted">admin@ejemplo.com</p>
      </div>
      <nav class="menu">
        <ul>
          <li onclick="window.location.href='../Dashboard/dashboard-admin.html'">Inicio</li>
          <li onclick="window.location.href='../terapeuta/terapeutas.html'">Terapeutas</li>
          <li onclick="window.location.href='pacientes.html'" class="active">Pacientes</li>
          <li onclick="window.location.href='../Ejercicios/ejercicios.html'">Ejercicios</li>
          <li onclick="window.location.href='../Dar de alta paciente/alta-paciente.html'">Dar de alta paciente</li>
          <li onclick="window.location.href='../Dar de alta terapeuta/alta-terapeuta.html'">Dar de alta terapeuta</li>
          <li onclick="window.location.href='../Historial/historial.html'">Historial</li>
          <li onclick="logoutAdmin()">Cerrar sesión</li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <h1>Pacientes Registrados</h1>
      
      <div class="search-section">
        <div style="display:flex; gap:12px; align-items:center; max-width:900px; margin:0 auto;">
          <input type="text" id="searchInput" placeholder="Buscar por nombre, doctor, tratamiento o estado..." style="flex:1">
        </div>
      </div>
      
      <div class="patients-container" id="patientsContainer">
        <!-- Las tarjetas se generan dinámicamente con JavaScript -->
      </div>
    </main>
  </div>

  <!-- Modal de edición -->
  <div class="modal-overlay" id="editModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Editar Paciente</h2>
        <button class="modal-close" onclick="closeEditModal()">&times;</button>
      </div>
      <div class="modal-body">
        <form id="editPatientForm">
          <input type="hidden" id="editPatientId">
          
          <div class="form-group">
            <label for="editName">Nombre completo *</label>
            <input type="text" id="editName" required>
          </div>
          
          <div class="form-group">
            <label for="editAge">Edad *</label>
            <input type="number" id="editAge" min="1" max="120" required>
          </div>
          
          <div class="form-group">
            <label for="editEmail">Correo electrónico *</label>
            <input type="email" id="editEmail" required>
          </div>
          
          <div class="form-group">
            <label for="editPhone">Teléfono *</label>
            <input type="tel" id="editPhone" required>
          </div>
          
          <div class="form-group">
            <label for="editDiagnosis">Diagnóstico / Condición *</label>
            <input type="text" id="editDiagnosis" required>
          </div>
          
          <div class="form-group">
            <label for="editStatus">Estado *</label>
            <select id="editStatus" required>
              <option value="Activo">Activo</option>
              <option value="Inactivo">Inactivo</option>
              <option value="En seguimiento">En seguimiento</option>
              <option value="Completado">Completado</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="editTherapist">Terapeuta asignado *</label>
            <select id="editTherapist" required>
              <option value="">Seleccionar terapeuta</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="editNotes">Notas adicionales</label>
            <textarea id="editNotes" placeholder="Observaciones, comentarios..."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-cancel" onclick="closeEditModal()">Cancelar</button>
        <button class="btn btn-save" onclick="savePatientChanges()">Guardar cambios</button>
      </div>
    </div>
  </div>

  <script src="../Dashboard/admin-manager.js"></script>
  <script src="admin-pacientes.js"></script>
</body>
</html>
